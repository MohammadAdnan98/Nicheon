<div class="edit-container" *ngIf="!loading; else loadingTpl">

  <!-- Page Header -->
  <div class="top-bar d-flex align-items-center">
    <i class="bi bi-arrow-left" (click)="goBack()"></i>
    <h5 class="ms-2 mb-0 fw-semibold">Edit Product</h5>
  </div>

  <form (ngSubmit)="saveProduct()" class="mt-3">

    <!-- Product Images -->
    <label class="section-label">Product Images (4-6 images)</label>
    <div class="image-grid">

      <!-- Existing images -->
      <div class="image-box" *ngFor="let img of productImages; let i = index">
        <img [src]="img" alt="product-image">
        <button type="button" class="remove-btn" (click)="removeImage(i)">Ã—</button>
      </div>

      <!-- Upload New -->
      <div class="upload-box">
        <input type="file" accept="image/*" multiple (change)="onImageSelect($event)">
        <i class="bi bi-plus-lg"></i>
      </div>

    </div>

    <!-- Product Name -->
    <div class="form-group mt-3">
      <label>Product Name</label>
      <input type="text" class="form-control" [(ngModel)]="product.productName" name="name" required>
    </div>

    <!-- Pricing + Weight -->
    <div class="row mt-3">
      <div class="col-6">
        <label>Price (Per Gram)</label>
        <input type="number" class="form-control" [(ngModel)]="product.pricePerGram" name="price" required>
      </div>

      <div class="col-6">
        <label>Weight (Grams)</label>
        <input type="number" class="form-control" [(ngModel)]="product.weightGrams" name="weight" required>
      </div>
    </div>

    <!-- Karat -->
    <div class="form-group mt-3">
      <label>Karat (Gold Purity)</label>
      <select class="form-select" [(ngModel)]="product.karat" name="karat">
        <option>18K</option>
        <option>20K</option>
        <option>22K</option>
        <option>24K</option>
      </select>
    </div>

    <!-- Hallmark Toggle -->
    <div class="form-check form-switch mt-3">
      <input class="form-check-input" type="checkbox" [(ngModel)]="product.isHallmarked" name="hallmarked">
      <label class="form-check-label">Hallmarked</label>
    </div>

    <div *ngIf="product.isHallmarked" class="form-group mt-2">
      <label>Hallmark Number</label>
      <input type="text" class="form-control" [(ngModel)]="product.hallmarkNumber" name="hallmarkNumber">
    </div>

    <!-- Stock -->
    <div class="form-group mt-3">
      <label>Available Stock (Units)</label>
      <input type="number" class="form-control" [(ngModel)]="product.stock" name="stock" required>
    </div>

    <!-- Description -->
    <div class="form-group mt-3">
      <label>Description</label>
      <textarea class="form-control" rows="3" [(ngModel)]="product.description" name="description"></textarea>
    </div>

    <!-- Buttons -->
    <div class="d-flex gap-2 mt-4">
      <button class="btn btn-dark w-100" type="submit">ðŸ’¾ Save Changes</button>
      <button type="button" class="btn btn-outline-danger w-100" (click)="confirmDelete()">ðŸ—‘ Delete Product</button>
    </div>

  </form>
</div>

<!-- Loading Template -->
<ng-template #loadingTpl>
  <div class="loading text-center">
    <div class="spinner-border text-primary"></div>
    <p class="mt-2">Loading product...</p>
  </div>
</ng-template>
