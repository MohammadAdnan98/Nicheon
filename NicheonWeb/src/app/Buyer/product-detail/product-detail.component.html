<div class="container-fluid py-4 px-md-5 px-3">
  <!-- Top Back Button -->
  <div class="mb-4">
    <a routerLink="/browse" class="btn btn-outline-secondary rounded-pill small">
      ⬅ Back to Listings
    </a>
  </div>

  <!-- 📸 Main Image Display -->
  <div class="image-preview mb-3 text-center">
    <div class="ratio ratio-4x3 rounded-4 overflow-hidden position-relative">
      <img [src]="selectedImage" class="w-100 h-100 object-fit-cover" alt="Main Scrap Image" />
      <div *ngIf="listing?.sellerVerified" class="verified-overlay">✅ Verified Seller</div>
    </div>
  </div>

  <!-- 🔍 Thumbnail Scrollable List -->
  <div class="thumbnail-row d-flex gap-3 overflow-auto pb-2 px-1 mb-4">
    <img
      *ngFor="let img of listing?.images"
      [src]="img"
      (click)="selectImage(img)"
      class="thumbnail-img border rounded-3"
      [class.active]="img === selectedImage"
      alt="Scrap thumbnail"
    />
  </div>

  <!-- Listing Details -->
  <div class="card p-4 rounded-4 shadow-sm mb-4">
    <h3 class="fw-bold mb-3">{{ listing?.type }} – {{ listing?.weight }}</h3>
    <div class="row g-3">
      <div class="col-md-6">
        <p><strong>₹ Expected Price:</strong> {{ listing?.price }}</p>
        <p><strong>📍 Location:</strong> {{ listing?.city }}, {{ listing?.state }}</p>
        <p><strong>🧑‍⚖️ Seller Name:</strong> {{ listing?.sellerName }}</p>
        <p><strong>✅ KYC Status:</strong> {{ listing?.sellerVerified ? 'Verified Seller' : 'Unverified' }}</p>
      </div>
      <div class="col-md-6">
        <p><strong>📅 Posted On:</strong> {{ listing?.postedOn }}</p>
        <p><strong>⌛ Valid Till:</strong> {{ listing?.validTill }}</p>
        <p><strong>♻️ Contract Available?</strong> {{ listing?.hasContract ? 'Yes – Monthly Scrap' : 'No' }}</p>
        <p *ngIf="listing?.interestCount"><strong>📊 Buyer Interest:</strong> {{ listing?.interestCount }} buyers contacted</p>
      </div>
    </div>
    <div *ngIf="listing?.description" class="mt-3">
      <strong>📝 Description:</strong>
      <p class="text-muted mt-1">{{ listing?.description }}</p>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="d-flex gap-3 flex-wrap sticky-bottom bg-white py-3 px-2 border-top shadow-sm justify-content-center">
    <button class="btn btn-success rounded-pill px-4" (click)="chatWithSeller()">💬 Chat with Seller</button>
    <button class="btn btn-outline-dark rounded-pill px-4" (click)="callSeller()">📞 Call Seller</button>
    <button class="btn btn-outline-primary rounded-pill px-4" (click)="toggleSave()">🔖 {{ listing?.saved ? 'Unsave' : 'Save Listing' }}</button>
    <button class="btn btn-outline-danger rounded-pill px-4" (click)="reportListing()">⚠️ Report Listing</button>
  </div>
</div>

<!-- Bottom Navigation Shared -->
<!-- <app-bottom-nav></app-bottom-nav> -->
