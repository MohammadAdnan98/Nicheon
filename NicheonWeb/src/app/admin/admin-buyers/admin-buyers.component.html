<div class="page-header">
  <div>
    <h2>Buyers</h2>
    <p>Manage buyer accounts & access</p>
  </div>

  <div class="status-filter">
    <label>Status</label>
    <select [(ngModel)]="profileStatus" (change)="loadBuyers()">
      <option [value]="2">Approved</option>
      <option [value]="1">Pending</option>
      <option [value]="3">Suspended</option>
      <option [value]="4">Blocked</option>
    </select>
  </div>
</div>

<div class="table-card">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Status</th>
        <th>Joined</th>
        <th class="action-col">Action</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let b of buyers">
        <td>
          <strong>{{ b.fullName }}</strong>
        </td>

        <td>{{ b.primaryEmail }}</td>

        <td>{{ b.primaryPhone }}</td>

        <td>
          <span class="badge approved" *ngIf="b.status === 'Approved'">Approved</span>
          <span class="badge pending" *ngIf="b.status === 'Pending'">Pending</span>
          <span class="badge suspended" *ngIf="b.status === 'Rejected'">Suspended</span>
          <span class="badge blocked" *ngIf="b.status === 'Blocked'">Blocked</span>
        </td>

        <td>{{ b.createdAt | date:'dd MMM yyyy' }}</td>

        <td class="action-cell">
  <div class="action-buttons">
    <button
            class="btn btn-success"
            *ngIf="b.status === 'Pending'|| b.status === 'Rejected'"
            (click)="changeStatus(b.userId, 2)"
          >
            Approve
          </button>
    <button
      class="btn btn-warning"
      *ngIf="b.status === 'Approved'"
      (click)="changeStatus(b.userId, 3)">
      Suspend
    </button>

    <button
      class="btn btn-danger"
      *ngIf="b.status != 'Blocked'"
      (click)="changeStatus(b.userId, 4)">
      Block
    </button>
  </div>
</td>

      </tr>
    </tbody>
  </table>
</div>
