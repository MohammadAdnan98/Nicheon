<div class="forgot-password-container">
  <div class="forgot-password-header">
    <img src="assets/Image/NicheonLogo.png" alt="LumaJweal Logo" class="logo-img" />
    <h2 class="title">Forgot Password</h2>
    <p class="subtitle">рдЕрдкрдирд╛ рдкрдВрдЬреАрдХреГрдд рдИрдореЗрд▓ рдпрд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ</p>
  </div>

  <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()">
    <!-- STEP 1: Request OTP (only email/mobile) -->
    <div *ngIf="!showResetSection" class="form-group">
      <label for="email">ЁЯУз Registered Email or Mobile</label>
      <input
        type="text"
        id="email"
        formControlName="email"
        placeholder="Enter registered email or mobile"
        autocomplete="off"
      />
      <div class="error" *ngIf="submitted && forgotForm.get('email')?.invalid">
        Please enter a valid email or mobile number
      </div>
    </div>

    <div *ngIf="!showResetSection" class="form-actions">
      <button type="button" class="otp-btn" (click)="sendOTP()" [disabled]="otpSent">
        {{ otpSent ? 'OTP Sent (' + resendTimer + 's)' : 'Send OTP' }}
      </button>
    </div>

    <!-- STEP 2: Reset Password (OTP + new password) -->
    <div *ngIf="showResetSection" class="reset-section">
      <div class="form-group">
        <label for="otp">ЁЯФР OTP</label>
        <input type="text" id="otp" formControlName="otp" placeholder="Enter OTP" maxlength="6" />
        <div class="error" *ngIf="submitted && forgotForm.get('otp')?.invalid">
          Enter the 6-digit OTP
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">ЁЯФТ New Password</label>
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          placeholder="Enter new password (8-16 chars)"
          autocomplete="new-password"
        />
        <div class="error" *ngIf="submitted && forgotForm.get('newPassword')?.errors">
          <div *ngIf="forgotForm.get('newPassword')?.errors?.['required']">Password is required</div>
          <div *ngIf="forgotForm.get('newPassword')?.errors?.['minlength']">Minimum 8 characters</div>
          <div *ngIf="forgotForm.get('newPassword')?.errors?.['maxlength']">Maximum 16 characters</div>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">ЁЯФТ Confirm Password</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="Confirm password"
          autocomplete="new-password"
        />
        <div class="error" *ngIf="submitted && forgotForm.errors?.['passwordMismatch']">
          Passwords do not match
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="submit-btn">Reset Password</button>
      </div>
    </div>

    <div class="back-login">
      <a routerLink="/login">тмЕя╕П Back to Login</a>
    </div>
  </form>
</div>
